---
documentclass: jss
author:
  - name: H. Sherry Zhang
    affiliation: Monash University
    address: 21 Chancellors Walk, Clayton VIC 3800 Australia
    email: \email{huize.zhang@monash.edu}
  - name: Dianne Cook
    affiliation: 'Monash University \AND'
    address: 21 Chancellors Walk, Clayton VIC 3800 Australia
    # location: Melbourne, Australia
    email:  dicook@monash.edu
  - name: Ursula Laa
    affiliation: 'University of Natural Resources and Life Sciences \AND'
    address: Gregor-Mendel-Straße 33, 1180 Wien, Austria
    email:  ursula.laa@boku.ac.at
  - name: Nicolas Langrené
    affiliation: 'BNU-HKBU United International College \AND'
    address: 2000 Jintong Road, Tangjiawan, Zhuhai, Guangdong Province, China
    email: nicolas@langrene.com
  - name: Patricia Menéndez
    affiliation: 'Monash University \AND'
    address: 21 Chancellors Walk, Clayton VIC 3800 Australia
    email:  patricia.menendez@monash.edu
title:
  formatted: "\\pkg{cubble}: An R Package for Structuring Spatio-temporal Data"
  # If you use tex in the formatted title, alsoge supply version without
  plain:     "cubble: An R Package for Structuring Spatio-temporal Data"
  # For running headers, if needed
  # short:     "\\pkg{foo}: A Capitalized Title"
abstract: >
  Spatio-temporal data have two types of variables: spatial variables have fixed value across time for the same location while temporal variables need both the location and timestamp to identify its value. These variables can be either organised in two separate tables, each focusing on one aspect of the data, or a single table that combines the two types of variables together. Both formats are useful in exploratory data analysis and visualisation, however it can be tedious to constantly switch between the two formats during the analysis and spend time casting the data into the desireable shape. In this paper, a new data structure, \code{cubble}, is proposed to ease the transformation between the two formats in spatio-temporal data analysis. The new data structure organises spatial and temporal variables as two forms of a single data object so that they can be wrangled separately while syncronised as a whole piece. More advanced topics discussed include handling data with hierarchical structure, matching data from multiple sources and using cubble in interactive graphics and spatio-temporal transformation. Examples are given using Australia climate weather station data, river level data, and climate reanalysis (ERA5) data to demonstrate the usage of the package.
keywords:
  # at least one keyword must be supplied
  formatted: [spatial, temporal, spatio temporal, "\\proglang{R}", environmental data, exploratory data analysis]
  plain:     [spatial, temporal, spatio temporal, R, environmental data, exploratory data analysis]
preamble: >
  \usepackage{amsmath}
  \usepackage{array}
  \usepackage{xcolor}
output: rticles::jss_article
bibliography: references.bib
---

```{r setup, echo = FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  warning = FALSE,
  message = FALSE,
  cache = TRUE,
  fig.path = "figures/",
  fig.height = 10
)
options(prompt = "R> ", continue = "+ ", 
        tibble.print_max = 5, tibble.print_min = 5)
```

```{r echo = FALSE}
library(cubble)
library(forcats)
library(stringr)
library(dplyr)
library(lubridate)
library(ggplot2)
library(GGally)
library(plotly)
library(crosstalk)
library(patchwork)
```

\newpage

```{r child = "1-intro.Rmd"}

```

```{r child = "2-the-cubble-pkg.Rmd"}

```

```{r child = "3-advanced.Rmd"}

```

```{r child = "4-1-basic.Rmd"}

```

```{r child = "4-2-agg.Rmd"}

```


```{r child = "4-3-water-level.Rmd"}

```


```{r child = "4-4-netcdf.Rmd"}

```

```{r child = "4-5-interactive.Rmd"}

```


```{r child = "5-conclusion.Rmd"}

```

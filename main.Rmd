---
documentclass: jss
author:
  - name: H. Sherry Zhang
    affiliation: Monash University
    address: 21 Chancellors Walk, Clayton VIC 3800 Australia
    email: \email{huize.zhang@monash.edu}
  - name: Dianne Cook
    affiliation: 'Monash University \AND'
    address: 21 Chancellors Walk, Clayton VIC 3800 Australia
    # location: Melbourne, Australia
    email:  dicook@monash.edu
  - name: Ursula Laa
    affiliation: 'University of Natural Resources and Life Sciences \AND'
    address: Gregor-Mendel-Straße 33, 1180 Wien, Austria
    email:  ursula.laa@boku.ac.at
  - name: Nicolas Langrené
    affiliation: 'BNU-HKBU United International College \AND'
    address: 2000 Jintong Road, Tangjiawan, Zhuhai, Guangdong Province, China
    email: nicolas@langrene.com
  - name: Patricia Menéndez
    affiliation: 'Monash University \AND'
    address: 21 Chancellors Walk, Clayton VIC 3800 Australia
    email:  patricia.menendez@monash.edu
title:
  formatted: "\\pkg{cubble}: An R Package for Structuring Spatio-temporal Data"
  # If you use tex in the formatted title, alsoge supply version without
  plain:     "cubble: An R Package for Structuring Spatio-temporal Data"
  # For running headers, if needed
  # short:     "\\pkg{foo}: A Capitalized Title"
abstract: >

  \textcolor{red}{start with describing the data: spatial and temporal, then what's the problem, then propose cubble.}
  
  \textcolor{red}{Exploring spatio-temporal data can sometimes be discouraging given the various different formats spatio-temporal data can present themselves in practice}. Moreover, the two observational units naturally exist in spatio-temporal data \textcolor{red}{can cost analysts many time and efforts} on organising variables and results and switching between a single table and multiple tables in the analysis. In this paper, a new data structure, \code{cubble}, is proposed for wrangling and visualising spatio-temporal data. The new data structure uses a single data object to organise spatial and temporal variables in two forms so that they can be wrangled separately while keep syncronised. Advanced considerations are given to illustrate data with hierarchical structure, data matching, how cubble fits with the interactive graphics pipeline, and spatio-temporal transformation. Examples are given to analysing Australia meteorology data, river level data, and climate reanalysis (ERA5). 
keywords:
  # at least one keyword must be supplied
  formatted: [spatial, temporal, spatio temporal, "\\proglang{R}", environmental data, exploratory data analysis]
  plain:     [spatial, temporal, spatio temporal, R, environmental data, exploratory data analysis]
preamble: >
  \usepackage{amsmath}
  \usepackage{array}
  \usepackage{xcolor}
output: rticles::jss_article
bibliography: references.bib
---

```{r setup, echo = FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  warning = FALSE,
  message = FALSE,
  cache = TRUE,
  fig.path = "figures/",
  fig.height = 10
)
options(prompt = "R> ", continue = "+ ", 
        tibble.print_max = 5, tibble.print_min = 5)
```

```{r echo = FALSE}
library(cubble)
library(forcats)
library(stringr)
library(dplyr)
library(lubridate)
library(ggplot2)
library(GGally)
library(plotly)
library(crosstalk)
library(patchwork)
```

\newpage

```{r child = "1-intro.Rmd"}

```

```{r child = "2-the-cubble-pkg.Rmd"}

```

```{r child = "3-advanced.Rmd"}

```

```{r child = "4-1-basic.Rmd"}

```

```{r child = "4-2-agg.Rmd"}

```


```{r child = "4-3-water-level.Rmd"}

```


```{r child = "4-4-netcdf.Rmd"}

```

```{r child = "4-5-interactive.Rmd"}

```


```{r child = "5-conclusion.Rmd"}

```

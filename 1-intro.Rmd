---
title: "1-intro"
output: pdf_document
---

# Introduction

Spatio-temporal data concerns variables in the spatial coordinates across time. Some variables are invariant to time and can be solely identified by its spatial location while other time varying variables need both the spatial and temporal identifiers to identify. Manipulating data in these two levels is usually done separately and the third tidy data principal [@tidydata] recommends each type of observational unit to form a table. Another feature for a spatio-temporal data structure to have is that variables created from subsequent operations can be automatically added to the existing table with the same level. This is better than an output that index the variables with the identifiers since otherwise analysts will need to manually join this output with existing variables in the same level.

<!-- Many data structures have been proposed for spatial (\pkg{sf} by @sf) and temporal (\pkg{tsibble} by @tsibble) data in the R community, while less has been done for spatio-temporal data. The lack of such tools could potentially because analysts usually treat the spatial and temporal dimension of the data separately, without realising the need to create a new data structure. While this approach follows the third tidy data principal [@tidydata] (*Each type of observational unit forms a table*), analysts always need to manually join results from different observational units or combining multiple tables into one for downstream analysis. This additional step doesn't add new operations into the data but can be error prone. \newline -->

Currently, available spatio-temporal data structures in R includes: \pkg{spacetime} [@spacetime], which proposes four space-time layouts: Full grid (STF), sparse grid(STS), irregular (STI), and trajectory (STT). \pkg{spacetime} is built on \pkg{sp} [@sp] and \pkg{xts} [@xts], both of which have been replaced by more recent implementations. \pkg{spatstat} [@spatstat] implements a `ppp` class for point pattern data; and more recent, \pkg{stars} [@stars] implements a spatio-temporal for vector and raster spatio-temporal data.  While these implementations either store spatial and temporal variables all in a single table, hence duplicate the spatial variables at each temporal unit; or split them into two separate tables that analysts need to manually join the data constantly when doing the analysis. This creates a gap in the software development. The requirement for such a tool is important given the ubiquity of spatio-temporal vector data in the wild: climate observations from weather stations, air quality variables from air monitoring stations, or any variables that are measured at fixed location across time.

This paper describes the implementation of a new spatio-temporal data structure: \pkg{cubble}. \pkg{Cubble} implements a data structure that uses two forms to manage the switch between spatial and temporal dimension. With this structure, users can manipulate the spatial or temporal dimension separately, while leaves the linking of two dimensions to \pkg{cubble}. The software is available from the Comprehensive R Archive Network (CRAN) at [CRAN link]. 

The rest of the paper is divided as follows: Section 2 presents the workflow of data manipulation in cubble. Section 3 explains how cubble deals with some advanced considerations  including data with hierarchical structure, data matching, and how cubble fits with existing static and interactive visualisation tools. Section 4 gives examples of the features introduced in the previous two sections with climate and hydrology data. An example on how cubble handle NetCDF data is also provided. Section 5 concludes the paper.


---
title: "5-conclusion"
output: pdf_document
---
# Conclusion {#conclude}

This paper describes an \proglang{R} package \pkg{cubble} for organising, manipulating and visualising spatio-temporal data. A new data structure, \code{cubble}, with the nested and long form, is proposed to connect the time invariant and varying variables in the spatio-temporal data. This design frees the data analysts from spending time on organising variables of different observational units. The data structure is also flexible to the techniques and packages analysts use to analyse the data, for example, in the matching example in section 4.3, users are free to use algorithms from another package to cluster stations.

The data structure and software are demonstrated with extensive examples. These include creating and coercing wild-caught data with potential mismatch on sites, handling hierarchical data, matching series spatially and temporally, reproducing ERA5 results from NetCDF data, and, lastly fitting into the interactive graphic pipeline of \pkg{plotly} and \pkg{leaflet}.

Future directions of the package involves responding to changes in the tidyverse packages that \pkg{cubble} imports, in particular, \pkg{tibble}, \pkg{tidyr}, and \pkg{dplyr}. In the spatial aspect, the simple feature representation wraps spatial coordinates in a list column, for some complex spatial operations, while sometimes, analysts may want to unpack them into longitude and latitude columns to work from. A smooth transition between the coordinate and simple feature representation can be added to \pkg{cubble}. \pkg{cubble} can also be extended to handle sites with moving coordinates and this would involve constructing a \code{sp} column for locations, similar to \code{ts} for time, and a form locations can be pivoted into, like the long form for temporal variables. In the multivariate aspect, \pkg{cubble} can also be extended with interface to more high dimensional visualisation methods, i.e., the tour method, to understand variable importance or comparing location similarities.

\newpage

# Acknowledgement

This work is funded by a Commonwealth Scientific and Industrial Research Organisation (CSIRO) Data61 Scholarship and started while Nicolas Langren√© was affiliated with CSIRO's Data61. The article is created using \pkg{knitr} [@knitr] and \pkg{rmarkdown} [@rmarkdown] in R. The source code for reproducing this paper can be found at: https://github.com/huizezhang-sherry/paper-cubble.



# Appendix

```{r illu-interactive-2, echo = FALSE, fig.align="center", out.height="40%", out.width = "100%", fig.cap = "An illustration of the data model under interactive graphics with cubble. When a point on the time series is selected, the corresponding row in the long cubble will be activated. This will link to all the rows with the same id in the long cubble and the row in the nested cubble with the same id (middle). Both plots will be updated with the full line selected and the point highlighted on the map (right)."}
knitr::include_graphics(here::here("figures/diagram-keynotes/diagram-keynotes.005.png"))
```

\newpage

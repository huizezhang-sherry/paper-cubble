\documentclass{article}

\usepackage{arxiv}

\usepackage[utf8]{inputenc} % allow utf-8 input
\usepackage[T1]{fontenc}    % use 8-bit T1 fonts
\usepackage{lmodern}        % https://github.com/rstudio/rticles/issues/343
\usepackage{hyperref}       % hyperlinks
\usepackage{url}            % simple URL typesetting
\usepackage{booktabs}       % professional-quality tables
\usepackage{amsfonts}       % blackboard math symbols
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{microtype}      % microtypography
\usepackage{graphicx}

\title{A template for the \emph{arxiv} style}

\author{
    H.Sherry Zhang
   \\
    Department of Econometrics and Business Statistics \\
    Monash University \\
  Melbourne, Australia \\
  \texttt{\href{mailto:huize.zhang@monash.edu}{\nolinkurl{huize.zhang@monash.edu}}} \\
   \And
    Dianne Cook
   \\
    Department of Econometrics and Business Statistics \\
    Monash University \\
  Melbourne, Australia \\
  \texttt{\href{mailto:dicook@monash.edu}{\nolinkurl{dicook@monash.edu}}} \\
   \And
    Ursula Laa
   \\
    Institute of Statistics \\
    University of Natural Resources and Life Sciences \\
  Vienna, Austria \\
  \texttt{\href{mailto:ursula.laa@boku.ac.at}{\nolinkurl{ursula.laa@boku.ac.at}}} \\
   \And
    Nicolas Langrené
   \\
    34 Village Street, Docklands VIC 3008 Australia \\
    CSIRO Data61 \\
  Melbourne, Australia \\
  \texttt{\href{mailto:nicolas.langrene@csiro.au}{\nolinkurl{nicolas.langrene@csiro.au}}} \\
   \And
    Patricia Menéndez
   \\
    Department of Econometrics and Business Statistics \\
    Monash University \\
  Melbourne, Australia \\
  \texttt{\href{mailto:patricia.menendez@monash.edu}{\nolinkurl{patricia.menendez@monash.edu}}} \\
  }



% Pandoc citation processing
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
% for Pandoc 2.8 to 2.10.1
\newenvironment{cslreferences}%
  {}%
  {\par}
% For Pandoc 2.11+
\newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
 {% don't indent paragraphs
  \setlength{\parindent}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1 \everypar{\setlength{\hangindent}{\cslhangindent}}\ignorespaces\fi
  % set entry spacing
  \ifnum #2 > 0
  \setlength{\parskip}{#2\baselineskip}
  \fi
 }%
 {}
\usepackage{calc} % for calculating minipage widths
\newcommand{\CSLBlock}[1]{#1\hfill\break}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}\break}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}



\begin{document}
\maketitle

\def\tightlist{}


\begin{abstract}
Enter the text of your abstract here.
\end{abstract}

\keywords{
    blah
   \and
    blee
   \and
    bloo
   \and
    these are optional and can be removed
  }

\hypertarget{introduction}{%
\section{Introduction}\label{introduction}}

Spatio-temporal data record changes of variables {[}for a reasonable
length of period and spread across geographical region{]}. In this
article, we consider spatio-temporal vector data, which are recorded in
a fixed interval and are point based, characterised by longitude and
latitude, in the spatial aspect. Examples of this type of data include
the house price of a city or county, climate measures from weather
stations in a country, and river level data from electronic gauges.

Analysing this type of data requires less considerations on the
geographical geometry type and map projection but more on how measures
in these fixed locations changes across the time domain and whether
these changes are related for adjacent locations. For example, when
nearby areas show patterns that are regular enough, visualising
spatio-temporal data can 1) discover regional time series features,
i.e.~trend and seasonality, 2) find the Waldo sites from the crowd, and
3) see how correlation of nearby sites changes across time.

The main difficulty in visualising this type of data is to show
information in both space and time dimension with the proper level of
details without information overflow. This would sometimes require
aggregating the time dimension into the proper level or slicing the data
into a reasonable number of subset for display. In this sense, a data
structure that regulates the manipulation spatio-temporal data will
benefit the analysis workflow. While many implementations focus on
manipulating and visualising pure spatial or temporal data, there are
not sufficient tools to deal with spatio-temporal data. The purpose of
this paper is to introduce a spatio-temporal vector data structure for
data analysis in R.

The rest of the paper will be divided as follows: Section 2 reviews the
existing data structure for spatio, temporal, and spatio-temporal data.
Section 3 presents a new data structure for spatio-temporal data:
cubble. Then the paper introduces the workflow of data manipulation and
visualisation with the cubble structure in Section 4. Section 5 gives
some examples on how common spatial and temporal manipulations are
performed with cubble and how static and interactive visualisation help
to understand climate and {[}\ldots{]} data.

\hypertarget{existing-data-structure-for-spatio-and-temporal-data}{%
\section{Existing data structure for spatio and temporal
data}\label{existing-data-structure-for-spatio-and-temporal-data}}

There has been a large class of implementations dedicated to processing
the spatial data. This includes \texttt{sf} (E. J. Pebesma 2018) and its
precedent \texttt{sp} (E. Pebesma and Bivand 2005) for \ldots{} and
\texttt{raster} (Hijmans 2020) and \texttt{terra} (Hijmans 2021) for
raster data. While these implementations specialised in geographic
manipulations with different type of simple features, it doesn't
incorporate a temporal dimension in the data structure. Project like
\texttt{stars} (E. Pebesma 2021) and \texttt{spacetime} (Bivand,
Pebesma, and Gomez-Rubio 2013) by R-Spatial allows for both space and
time dimension for raster and vector data, but the underlying data
structure is a multi-dimensional array, which could be difficult to
operate for R users who are more familiar with the operation in 2D
dataframe/ tibble.

In the temporal aspect, the \texttt{tsibble} (Wang, Cook, and Hyndman
2020) structure and its tidyverts ecosystem have provided a {[}\ldots{}
{]} workflow to work with temporal data. In a tsibble structure,
temporal data is characterised by \texttt{index} and \texttt{key} where
\texttt{index} is the temporal identifier and \texttt{key} is the
identifier for multiple series, which could be used as a spatio
identifier. However, a tsibble object, by construction, always requires
the \texttt{index} in its structure. This makes it less appealing for
spatio-temporal data since the output of calculated spatio-specific
variables (i.e.~features of each series) don't have the time dimension.
Analysts will either need to have an additional step to join this output
to the original tsibble or operate with variables stored in two separate
objects. In addition, the long form structure of a tsibble object means
spatio variables (i.e.~longitude, latitude, and features of each series
if joined back to the tsibble) of each spatio identifier will be
repetitively recorded at each timestamp. This repetition is unnecessary
and would inflate the object size for long series.

\hypertarget{a-new-data-structure-for-spatio-temporal-data}{%
\section{A new data structure for spatio-temporal
data}\label{a-new-data-structure-for-spatio-temporal-data}}

In spatio-temporal data, a variable is usually either group-related or
time-related. While time-related variables record variables that change
in time, group-related variables are invariant to the time and have only
one value per group. A cubble simplifies the workflow in spatio-temporal
data through managing group and time-related variables separately in two
forms: list-column and long form. The list column form:

\begin{itemize}
\tightlist
\item
  defines each group in a row,
\item
  displays the group-related variables in columns, and
\item
  nests all the time-related variables into a column called \texttt{ts}.
\end{itemize}

In the long form,

\begin{itemize}
\tightlist
\item
  each combination of group and timestamp occupies a row
\item
  time-related variables are displayed, and
\item
  group-related variables are not explicitly displayed but can be
  accessed through the \texttt{meta} attribute
\end{itemize}

Below are the how the list-column and long form look like for Australia
climate data, which records daily precipitation, maximum and minimum
temperature for 55 stations across Australia from 2015- 2020.

\newpage

\begin{verbatim}
## # Cubble: station-wise: list-column
## # Group:  station [55]
## # Meta:   station [fct], lat [dbl], long [dbl], elevation [dbl], name [fct]
##    station       lat  long elevation name                ts                  
##    <fct>       <dbl> <dbl>     <dbl> <fct>               <list>              
##  1 ASN00001019 -14.3  127.      23   kalumburu           <tbl_ts [2,147 x 4]>
##  2 ASN00002012 -18.2  128.     422   halls creek airport <tbl_ts [2,191 x 4]>
##  3 ASN00003003 -17.9  122.       7.4 broome airport      <tbl_ts [2,192 x 4]>
##  4 ASN00006011 -24.9  114.       4   carnarvon airport   <tbl_ts [2,192 x 4]>
##  5 ASN00009021 -31.9  116.      15.4 perth airport       <tbl_ts [2,192 x 4]>
##  6 ASN00009193 -32.0  116.      43.1 rottnest island     <tbl_ts [2,192 x 4]>
##  7 ASN00009518 -34.4  115.      13   cape leeuwin        <tbl_ts [2,184 x 4]>
##  8 ASN00009789 -33.8  122.      25   esperance           <tbl_ts [2,187 x 4]>
##  9 ASN00010286 -31.6  117.     217.  cunderdin airfield  <tbl_ts [2,190 x 4]>
## 10 ASN00010917 -32.7  117.     275   wandering           <tbl_ts [2,192 x 4]>
## # ... with 45 more rows
\end{verbatim}

\begin{verbatim}
## # Cubble: time-wise: long form [tsibble]
## # Group:  station [55]
## # Meta:   station [fct], lat [dbl], long [dbl], elevation [dbl], name [fct]
##    station     date        prcp  tmax  tmin
##    <fct>       <date>     <dbl> <dbl> <dbl>
##  1 ASN00001019 2015-01-01   164  31.5  25  
##  2 ASN00001019 2015-01-02   124  31.3  25  
##  3 ASN00001019 2015-01-03    50  29.2  24.7
##  4 ASN00001019 2015-01-04   204  32.1  24.3
##  5 ASN00001019 2015-01-05   412  31.4  24.6
##  6 ASN00001019 2015-01-06   200  28.7  25.1
##  7 ASN00001019 2015-01-07   822  30.2  24.5
##  8 ASN00001019 2015-01-08    22  31    26.6
##  9 ASN00001019 2015-01-09    62  32.7  26.2
## 10 ASN00001019 2015-01-10   274  32.9  22.6
## # ... with 120,311 more rows
\end{verbatim}

\hypertarget{manipulation-and-visualisation-with-cubble}{%
\section{\texorpdfstring{Manipulation and visualisation with
\texttt{cubble}}{Manipulation and visualisation with cubble}}\label{manipulation-and-visualisation-with-cubble}}

\hypertarget{cubble-verbs}{%
\subsection{Cubble verbs}\label{cubble-verbs}}

Mention different types of manipulation with cubble:

\begin{itemize}
\tightlist
\item
  \texttt{dplyr} support for cubble:

  \begin{itemize}
  \tightlist
  \item
    basic 5s: mutate, filter, summarise, select, arrange
  \item
    group and ungroup: group\_by, ungroup
  \item
    slice family
  \end{itemize}
\item
  summarise missing stats
\end{itemize}

\hypertarget{examples}{%
\section{Examples}\label{examples}}

Daily climate data (prcp, tmax, and tmin) from RNOAA - lots of stations
across Australia

An exploratory data analysis questions: What's the climate profile look
like in Australia

\begin{itemize}
\tightlist
\item
  General features: Any general trend/ fluctuation in prcp, tmax, and
  tmin?
\item
  Local features: Any station stands out from the crowd?
\end{itemize}

\hypertarget{manipulation}{%
\subsection{Manipulation}\label{manipulation}}

\begin{itemize}
\tightlist
\item
  data quality check: filter out stations have variables not properly
  recorded
\item
  data summary:

  \begin{itemize}
  \tightlist
  \item
    daily -\textgreater{} monthly/ weekly,
  \item
    summarise by mean for tmax/ tmin, sum for prcp
  \end{itemize}
\item
\end{itemize}

\hypertarget{graphics}{%
\subsection{Graphics}\label{graphics}}

Static + interactive -\textgreater{} tooltip to show additional
information upon hovering

\begin{itemize}
\tightlist
\item
  Where are those stations on the map?

  \begin{itemize}
  \tightlist
  \item
    Mention mostly aero, airport, and lighthouse
  \end{itemize}
\end{itemize}

\hypertarget{summary}{%
\section*{Summary}\label{summary}}
\addcontentsline{toc}{section}{Summary}

\hypertarget{refs}{}
\begin{CSLReferences}{1}{0}
\leavevmode\hypertarget{ref-spacetimebook}{}%
Bivand, Roger S., Edzer Pebesma, and Virgilio Gomez-Rubio. 2013.
\emph{Applied Spatial Data Analysis with {R}, Second Edition}. Springer,
NY. \url{https://asdar-book.org/}.

\leavevmode\hypertarget{ref-raster}{}%
Hijmans, Robert J. 2020. \emph{Raster: Geographic Data Analysis and
Modeling}. \url{https://CRAN.R-project.org/package=raster}.

\leavevmode\hypertarget{ref-terra}{}%
---------. 2021. \emph{Terra: Spatial Data Analysis}.
\url{https://CRAN.R-project.org/package=terra}.

\leavevmode\hypertarget{ref-stars}{}%
Pebesma, Edzer. 2021. \emph{Stars: Spatiotemporal Arrays, Raster and
Vector Data Cubes}. \url{https://CRAN.R-project.org/package=stars}.

\leavevmode\hypertarget{ref-pebesma2018simple}{}%
Pebesma, Edzer J. 2018. {``Simple Features for r: Standardized Support
for Spatial Vector Data.''} \emph{R J.} 10 (1): 439.

\leavevmode\hypertarget{ref-pebesma2005s}{}%
Pebesma, Edzer, and Roger S Bivand. 2005. {``S Classes and Methods for
Spatial Data: The Sp Package.''} \emph{R News} 5 (2): 9--13.

\leavevmode\hypertarget{ref-tsibbles}{}%
Wang, Earo, Dianne Cook, and Rob J Hyndman. 2020. {``A New Tidy Data
Structure to Support Exploration and Modeling of Temporal Data.''}
\emph{Journal of Computational and Graphical Statistics} 29 (3):
466--78. \url{https://doi.org/10.1080/10618600.2019.1695624}.

\end{CSLReferences}

\bibliographystyle{unsrt}
\bibliography{references.bib}


\end{document}

---
title: "2-0-cube"
output: pdf_document
---

<!-- and software implementation has been seen in many R packages: \pkg{raster} [@raster], \pkg{terra} [@terra], and \pkg{stars} [@stars]. -->

<!-- # Existing work and new challenges -->

<!-- Spatio-temporal software should echo with the advance in spatial and temporal data analysis. This section will start with the \pkg{spacetime} paper [@spacetime] that sets the foundation for wrangling spatio-temporal data in \proglang{R}, and then describe some emerging concepts and software in data analysis since the paper publishes and what remains as challenges. -->


<!-- Also, array is not the best solution for a large subset of data, specifically, the vector spatio-temporal data. With vector data, spatial and temporal variables are commonly collected in separate 2D tables and there is usually a location ID to link the spatial and temporal information. Sometimes, the geometrical shape of the location may not present and an additional linking is needed to incorporate the map data. With the multiple pieces in 2D data frame format, there should be a solution to organise all these data from multiple sources in a 2D structure, without needing to convert it into higher dimensional representation. -->


# Conceptual framework: spatio-temporal cube {#cube}

Spatio-temporal data can be conceptualised using a cubical data model with three axes. This abstraction can be useful to generalise operations or even visualisation: @lu_multidimensional_2018 shows an example of how array operations (select, scale, reduce, rearrange, and compute) can be mapped onto the cube; @bach_review_2014 reviews the temporal data visualisation based on space-time cube operations. Notice that the term space-time cube in their article "does not need to involve spatial data", but refers to "an abstract 2D substrate that is used to visualize data at a specific time". Despite its main focus being on temporal data, the mindset of abstracting out data representation to construct visualisation is applicable to our spatio-temporal data manipulation and visualisation.

While a cubical conceptual data model is neat to conceptually view the spatio-temporal data, a 3D data representation, or an array,  may not be convenient for data wrangling. There are two reasons for this: 1) While arrays are efficient for the computation on numerical values, spatio-temporal data contains more than just numerical variables. Wrangling on character strings and specific datetime classes are common tasks for spatio-temporal data but are not easy with arrays. 2) The `mutate()` syntax for creating new variables is no longer valid since the operation can no longer define how a created 1D vector should be added to the array. 

There have been many cubes defined using time, latitude, and longitude, which can be seen as taking snapshots of the space and stacking on time. Our spatio-temporal cube is defined slightly differently with three axes: time, site, and variable as Figure \ref{fig:cube-def}. The time axis is the same across the two formations, the site encompasses latitude and longitude into a single column identifier, while variables are stacked on this defined space-time canvas. This notion is adopted to avoid the use of hypercube when describing multivariate spatio-temporal data. 


```{r cube-def, echo = FALSE, fig.align="center", out.width = "50%", fig.cap = "An ilustration of the conceputalised spatio-temporal cube with three axies: time, site, and variable."}
knitr::include_graphics(here::here("figures/cube-def.png"))
```